# Rep5x 5-Axis G-code Previewer

An interactive 5-axis G-code previewer and animator specifically designed for Rep5x printer files.

## Features

- **5-Axis Visualization**: Full visualization of A-axis (yaw) and B-axis (pitch) movements
- **Inverse Kinematics Support**: Automatically detects and reverses IK corrections to show original print path
- **Animation Controls**: Play, pause, speed control, and progress scrubbing
- **File Analysis**: Detailed statistics about print commands, layers, and IK corrections
- **Interactive 3D View**: Mouse controls for rotating and zooming the view

## Usage

1. **Load G-code**: Use the file upload button to load a Rep5x G-code file
2. **Review Info**: Check the file information panel for print details and IK parameters
3. **Control Animation**: Use play/pause buttons and speed slider to control playback
4. **Adjust View**: Toggle visibility of print path, printhead, and coordinate axes
5. **Monitor Progress**: Watch real-time position updates and layer progress

## Supported Features

### G-code Parsing
- Extracts 5-axis movement commands (X, Y, Z, A, B)
- Reads Rep5x metadata from comments
- Analyzes print statistics and timing

### Inverse Kinematics
- Automatically detects IK-enabled G-code files
- Reverses Rep5x inverse kinematics corrections
- Shows analysis of IK correction magnitudes

### Animation
- Real-time 5-axis printhead orientation
- Progressive print path building
- Adjustable playback speed (0.1x to 5.0x)
- Frame-accurate position tracking

## Rep5x Integration

This previewer is designed to work with G-code generated by the Rep5x Vase Generator tool. It automatically reads:

- **IK Parameters**: LA and LB offset values
- **IK Formulas**: Rep5x-specific kinematic corrections
- **A-axis Optimization**: Continuous rotation optimization status
- **Print Metadata**: Shape, dimensions, layer settings

## File Format

The previewer expects G-code files with Rep5x-specific comment headers:

```gcode
; Generated by Rep5x Vase Generator
; === Rep5x 5-Axis Parameters ===
; Inverse Kinematics: enabled
; LA Parameter: 0
; LB Parameter: 46
; IK Formulas:
; X = X' + sin(A') × LA + cos(A') × sin(B') × LB
; Y = Y' - LA + cos(A') × LA - sin(A') × sin(B') × LB
; Z = Z' + cos(B') × LB - LB
```

## Technical Details

### Architecture
- **GcodeParser**: Parses G-code and extracts metadata
- **InverseKinematicsReverser**: Reverses IK corrections when needed
- **AnimationEngine**: Handles 3D visualization and animation
- **App**: Coordinates components and manages UI

### 3D Visualization
- Built with Three.js for hardware-accelerated rendering
- Shows 5-axis printhead with orientation indicators
- Real-time print path building during animation
- Interactive camera controls

## Browser Support

Requires a modern browser with WebGL support:
- Chrome 70+
- Firefox 65+
- Safari 12+
- Edge 79+

## Development

The previewer is built with:
- **Three.js**: 3D rendering and visualization
- **Tailwind CSS**: UI styling
- **Vanilla JavaScript**: No framework dependencies

### File Structure
```
gcode-previewer/
├── index.html                     # Main HTML interface
├── app.js                         # Main application controller
├── gcode-parser.js                # G-code parsing and metadata extraction
├── inverse-kinematics-reverser.js # IK correction reversal
├── animation-engine.js            # 3D visualization and animation
└── README.md                      # This documentation
```

## Future Enhancements

Potential features for future development:
- Export animation as video
- Layer-by-layer inspection mode
- Print time estimation improvements
- Support for additional 5-axis formats
- Collision detection and warnings
- Tool path optimization analysis